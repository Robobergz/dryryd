<!doctype html>
<html lang="en">
<head>
<meta charset="utf-8"/><meta name="viewport" content="width=device-width,initial-scale=1"/>
<title>DRY RYD</title>
<style>
:root{
  --stack-width: clamp(176px, 22.4vw, 264px);
  --protection-height: clamp(8px, 1.44vw, 14px);
  --rain-width-ratio: 0.26;
  --rain-height-ratio: 1.15;
  --rain-gap-ratio: 0.85;
  --rain-color:#000;
  --bg-rain-color:rgba(0,0,0,0.14);
}

html,body{height:100%;margin:0;background:#fff;font-family:system-ui,color:#000;}
#bg{position:fixed;inset:0;z-index:0;pointer-events:none;}

/* Layout */
.page{
  position:relative;z-index:2;min-height:100vh;
  display:flex;flex-direction:column;justify-content:center;align-items:center;
}
.stack{
  width:var(--stack-width);
  display:grid;
  place-items:center;
  row-gap:calc(var(--protection-height)*var(--rain-gap-ratio));
}

/* WEATHER container: same width as logo, shared area for rain bars + sun */
.weather{
  width:100%;
  aspect-ratio:1/1;
  position:relative;
  display:flex;
  align-items:center;
  justify-content:center;
}

/* Top RAIN bars inside weather box */
.weather-rain{
  position:absolute;
  inset:0;
  display:flex;
  align-items:center;
  justify-content:center;
  pointer-events:none;
  opacity:1;
  transition:opacity 1s linear;
}
.weather-rain-inner{
  width:calc(var(--stack-width)*var(--rain-width-ratio));
  height:calc(var(--stack-width)*var(--rain-width-ratio)*var(--rain-height-ratio));
  display:flex;
  align-items:flex-start;
  justify-content:center;
  gap:12%;
}
.weather-rain-inner .drop{
  width:18%;
  background:var(--rain-color);
  transform:translateY(-55%) scaleY(0.1);
  opacity:0;
  animation:dropFall 4s infinite;
  align-self:flex-start;
  transform-origin:top;
}
.weather-rain-inner .drop:nth-child(1){height:70%;animation-delay:0s;}
.weather-rain-inner .drop:nth-child(2){height:100%;animation-delay:0.25s;}
.weather-rain-inner .drop:nth-child(3){height:70%;animation-delay:0.5s;}

/* SUN icon in same weather box */
.weather-sun{
  position:absolute;
  inset:0;
  margin:auto;
  width:60%;
  height:auto;
  opacity:0;
  pointer-events:none;
  transition:opacity 5s linear;
}

/* When sunny: fade sun in, rain bars out; mapping matches bg rain state */
body.sunny .weather-sun{opacity:1;}
body.sunny .weather-rain{opacity:0;}

/* Fast sun fade-out phase */
body.sun-fadeout .weather-sun{
  transition:opacity 1s linear;
  opacity:0;
}
body.sun-fadeout .weather-rain{
  transition:opacity 1s linear;
  opacity:1;
}

.protection{
  width:100%;
  height:var(--protection-height);
  background:transparent;
}
.wordmark{
  width:100%;height:auto;display:block;margin-top:0;
}

.contact{
  position:fixed;left:50%;transform:translateX(-50%);
  bottom:9vh;font-size:clamp(14px,1.6vw,18px);
  text-decoration:none;color:#000;z-index:3;
}

@keyframes dropFall{
 0%{transform:translateY(-55%) scaleY(0.1);opacity:0;}
 10%{opacity:1;}
 45%{transform:translateY(0) scaleY(1);opacity:1;}
 80%{opacity:1;}
 100%{transform:translateY(0) scaleY(1);opacity:0;}
}
</style>
</head>
<body>
<canvas id="bg"></canvas>

<main class="page">
  <section class="stack">
    <div class="weather">
      <div class="weather-rain" id="rainTop" aria-hidden="true">
        <div class="weather-rain-inner">
          <div class="drop"></div><div class="drop"></div><div class="drop"></div>
        </div>
      </div>
      <img src="./Sun@4x.png" alt="" class="weather-sun" aria-hidden="true"/>
    </div>

    <div class="protection"></div>
    <img id="wordmark" class="wordmark" src="./DryRYd_logoBTM@4x.png" alt="DRY RYD"/>
  </section>
</main>

<a class="contact" href="mailto:staydry@dryryd.com?subject=Rain%20Check%3F%20Actually%2C%20I'm%20Ready%20to%20Talk%20Now">CONTACT</a>

<script>
const canvas=document.getElementById("bg");
const ctx=canvas.getContext("2d",{alpha:true});
const wordmarkEl=document.getElementById("wordmark");
const topDrops=[...document.querySelectorAll("#rainTop .drop")];

let W,H,dpr,drops=[];
let rainActive=true;
const dropCount=130, speedMin=2, speedMax=6, lengthMin=12, lengthMax=30;

function resize(){
  dpr=window.devicePixelRatio||1;
  W=innerWidth; H=innerHeight;
  canvas.width=W*dpr; canvas.height=H*dpr;
  canvas.style.width=W+"px"; canvas.style.height=H+"px";
  ctx.setTransform(dpr,0,0,dpr,0,0);
  initDrops();
}
function initDrops(){
  drops=[];
  for(let i=0;i<dropCount;i++) drops.push(makeDrop(true));
}
function makeDrop(randomY=false){
  const x=Math.random()*W;
  const y=randomY?Math.random()*H:-Math.random()*H*0.2;
  const speed=speedMin+Math.random()*(speedMax-speedMin);
  const len=lengthMin+Math.random()*(lengthMax-lengthMin);
  return {x,y,speed,len};
}
function getRect(){
  const r=wordmarkEl.getBoundingClientRect();
  return {left:r.left, top:r.top, width:r.width, height:r.height};
}
function tick(){
  ctx.clearRect(0,0,W,H);
  const rect=getRect();

  if(rainActive){
    ctx.strokeStyle="rgba(0,0,0,0.14)";
    ctx.lineWidth=1; ctx.lineCap="round";
    for(const d of drops){
      ctx.beginPath(); ctx.moveTo(d.x,d.y); ctx.lineTo(d.x,d.y+d.len); ctx.stroke();
      d.y+=d.speed;
      if(d.y>H+d.len){
        const nd=makeDrop(false);
        d.x=nd.x; d.y=-Math.random()*80; d.speed=nd.speed; d.len=nd.len;
      }
    }
  }

  ctx.clearRect(rect.left,rect.top,rect.width,rect.height);
  requestAnimationFrame(tick);
}

function resetTopAnim(){
  topDrops.forEach(el=>el.style.animation="none");
  void document.body.offsetHeight;
  topDrops.forEach(el=>el.style.animation="");
}

function startCycle(){
  document.body.classList.remove("sunny","sun-fadeout");
  rainActive=true;
  resetTopAnim();

  setTimeout(()=>{
    rainActive=false;
    document.body.classList.add("sunny");

    setTimeout(()=>{
      setTimeout(()=>{
        document.body.classList.add("sun-fadeout");
        document.body.classList.remove("sunny");
        rainActive=true;
        resetTopAnim();

        setTimeout(()=>{
          document.body.classList.remove("sun-fadeout");
          startCycle();
        },1000);
      },5000);
    },5000);
  },5000);
}

window.addEventListener("resize",resize);
resize(); tick(); startCycle();
</script>
</body>
</html>