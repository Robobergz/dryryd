<!doctype html>
<html lang="en">
<head>
<meta charset="utf-8"/><meta name="viewport" content="width=device-width,initial-scale=1"/>
<title>DRY RYD</title>
<style>
:root{
  --stack-width: clamp(176px, 22.4vw, 264px);
  --protection-height: clamp(8px, 1.44vw, 14px);
  --rain-width-ratio: 0.26;
  --rain-height-ratio: 1.15;
  --rain-gap-ratio: 0.85;
  --rain-color:#000;
  --bg-rain-color:rgba(0,0,0,0.14);
}

html,body{height:100%;margin:0;background:#fff;font-family:system-ui;color:#000;}
#bg{position:fixed;inset:0;z-index:0;pointer-events:none;}

/* SUN asset */
.sun{
  position: fixed;
  left: 50%;
  top: 12vh;
  transform: translateX(-50%);
  width: clamp(70px, 9vw, 130px);
  height:auto;
  opacity:0;
  z-index:1;
  pointer-events:none;
  transition: opacity 5s linear; /* slow fade in */
}
body.sunny .sun{opacity:1;}
/* fast sun fade-out */
body.sun-fadeout .sun{transition:opacity 1s linear; opacity:0;}

.page{position:relative;z-index:2;min-height:100vh;display:flex;flex-direction:column;justify-content:center;align-items:center;}
.stack{width:var(--stack-width);display:grid;place-items:center;row-gap:calc(var(--protection-height)*var(--rain-gap-ratio));}

/* Top RAIN bars are mapped to background rain visibility */
.rain{
  width:calc(var(--stack-width)*var(--rain-width-ratio));
  height:calc(var(--stack-width)*var(--rain-width-ratio)*var(--rain-height-ratio));
  display:flex;align-items:flex-start;justify-content:center;gap:12%;
  opacity:1;
  transition: opacity 1s linear; /* quick fade synced with bg rain */
}
body.no-rain .rain{opacity:0;}

.drop{
  width:18%;background:var(--rain-color);
  transform:translateY(-55%) scaleY(0.1);
  opacity:0;animation:dropFall 4s infinite;
  align-self:flex-start;transform-origin:top;
}
.drop:nth-child(1){height:70%;animation-delay:0s;}
.drop:nth-child(2){height:100%;animation-delay:0.25s;}
.drop:nth-child(3){height:70%;animation-delay:0.5s;}

.protection{width:100%;height:var(--protection-height);background:transparent;}
.wordmark{width:100%;height:auto;display:block;margin-top:0;}

.contact{position:fixed;left:50%;transform:translateX(-50%);bottom:9vh;font-size:clamp(14px,1.6vw,18px);text-decoration:none;color:#000;z-index:3;}

@keyframes dropFall{
 0%{transform:translateY(-55%) scaleY(0.1);opacity:0;}
 10%{opacity:1;}
 45%{transform:translateY(0) scaleY(1);opacity:1;}
 80%{opacity:1;}
 100%{transform:translateY(0) scaleY(1);opacity:0;}
}
</style>
</head>
<body>
<canvas id="bg"></canvas>
<img class="sun" id="sun" src="./Sun@4x.png" alt="" aria-hidden="true"/>

<main class="page">
<section class="stack">
  <div class="rain" id="rainTop" aria-hidden="true">
    <div class="drop"></div><div class="drop"></div><div class="drop"></div>
  </div>
  <div class="protection"></div>
  <img id="wordmark" class="wordmark" src="./DryRYd_logoBTM@4x.png" alt="DRY RYD"/>
</section>
</main>

<a class="contact" href="mailto:staydry@dryryd.com?subject=Rain%20Check%3F%20Actually%2C%20I'm%20Ready%20to%20Talk%20Now">CONTACT</a>

<script>
/**
 * Synced visibility:
 * - When bg rain is ON, top RAIN bars are ON.
 * - When bg rain is OFF (sunny), top RAIN bars are OFF.
 *
 * Cycle (16s total):
 * 0–5s  : rain flowing + top bars visible
 * 5–10s : sun fades in slow, bg rain stops immediately, top bars fade out quickly (1s) at same moment
 * 10–15s: hold sun
 * 15–16s: sun fades out fast (1s), bg rain resumes immediately + top bars fade in quickly (1s)
 * then restart
 */
const canvas=document.getElementById("bg");
const ctx=canvas.getContext("2d",{alpha:true});
const wordmarkEl=document.getElementById("wordmark");
const topDrops=[...document.querySelectorAll("#rainTop .drop")];

let W,H,dpr,drops=[];
let rainActive=true;
const dropCount=130, speedMin=2, speedMax=6, lengthMin=12, lengthMax=30;

function resize(){
 dpr=window.devicePixelRatio||1;
 W=innerWidth; H=innerHeight;
 canvas.width=W*dpr; canvas.height=H*dpr;
 canvas.style.width=W+"px"; canvas.style.height=H+"px";
 ctx.setTransform(dpr,0,0,dpr,0,0);
 initDrops();
}
function initDrops(){drops=[];for(let i=0;i<dropCount;i++) drops.push(makeDrop(true));}
function makeDrop(r=false){
 let x=Math.random()*W;
 let y=r?Math.random()*H:-Math.random()*H*0.2;
 let s=speedMin+Math.random()*(speedMax-speedMin);
 let l=lengthMin+Math.random()*(lengthMax-lengthMin);
 return{x,y,speed:s,len:l};
}
function getRect(){
 let r=wordmarkEl.getBoundingClientRect();
 return {left:r.left, top:r.top, width:r.width, height:r.height};
}
function tick(){
 ctx.clearRect(0,0,W,H);
 const rect=getRect();

 if(rainActive){
   ctx.strokeStyle="rgba(0,0,0,0.14)";
   ctx.lineWidth=1; ctx.lineCap="round";
   for(const d of drops){
     ctx.beginPath(); ctx.moveTo(d.x,d.y); ctx.lineTo(d.x,d.y+d.len); ctx.stroke();
     d.y+=d.speed;
     if(d.y>H+d.len){Object.assign(d, makeDrop(false)); d.y=-Math.random()*80;}
   }
 }
 // protection mask
 ctx.clearRect(rect.left,rect.top,rect.width,rect.height);
 requestAnimationFrame(tick);
}

function resetTopAnim(){
 topDrops.forEach(el=>el.style.animation="none");
 void document.body.offsetHeight;
 topDrops.forEach(el=>el.style.animation="");
}

function startCycle(){
 // Rain phase
 document.body.classList.remove("sunny","sun-fadeout","no-rain");
 rainActive=true;
 resetTopAnim();

 setTimeout(()=>{
   // Begin sunny: stop bg rain + fade top bars out in sync + fade sun in slow
   rainActive=false;
   document.body.classList.add("no-rain","sunny");

   setTimeout(()=>{
     // Hold sun fully visible for 5s (sun finished fading in by now)
     setTimeout(()=>{
       // Transition back to rain: fast sun fade out + bg rain on + top bars in sync
       document.body.classList.remove("sunny");
       document.body.classList.add("sun-fadeout");
       document.body.classList.remove("no-rain"); // bars fade back in
       rainActive=true;

       setTimeout(()=>{
         document.body.classList.remove("sun-fadeout");
         startCycle();
       },1000);
     },5000);
   },5000);
 },5000);
}

window.addEventListener("resize",resize);
resize(); tick(); startCycle();
</script>
</body>
</html>